"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var instance = null;
var Event = (function () {
    function Event() {
        this.dispatchedDatas = {};
        this.funcCues = {};
        if (!instance) {
            instance = this;
        }
        this.init();
        return instance;
    }
    Event.prototype.init = function () {
        this.dispatchedDatas = {};
        this.funcCues = {};
    };
    Event.prototype.on = function (mutationType, func) {
        if (this.dispatchedDatas[mutationType]) {
            func();
        }
        else {
            if (!this.funcCues[mutationType]) {
                this.funcCues[mutationType] = [];
            }
            this.funcCues[mutationType].push(func);
        }
    };
    Event.prototype.initData = function (mutationType) {
        this.dispatchedDatas[mutationType] = null;
    };
    Event.prototype.dispatch = function (mutationType) {
        this.dispatchedDatas[mutationType] = true;
        if (this.funcCues[mutationType]) {
            for (var _i = 0, _a = this.funcCues[mutationType]; _i < _a.length; _i++) {
                var func = _a[_i];
                func();
            }
            this.funcCues[mutationType] = null;
        }
    };
    return Event;
}());
exports.default = new Event();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiRXZlbnQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJFdmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBLElBQUksUUFBUSxHQUFHLElBQUksQ0FBQztBQUVwQjtJQUtJO1FBSFEsb0JBQWUsR0FBVyxFQUFFLENBQUM7UUFDN0IsYUFBUSxHQUFXLEVBQUUsQ0FBQztRQUcxQixFQUFFLENBQUMsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUM7WUFDWixRQUFRLEdBQUcsSUFBSSxDQUFDO1FBQ3BCLENBQUM7UUFDRCxJQUFJLENBQUMsSUFBSSxFQUFFLENBQUM7UUFDWixNQUFNLENBQUMsUUFBUSxDQUFDO0lBQ3BCLENBQUM7SUFFRCxvQkFBSSxHQUFKO1FBQ0ksSUFBSSxDQUFDLGVBQWUsR0FBRyxFQUFFLENBQUM7UUFDMUIsSUFBSSxDQUFDLFFBQVEsR0FBRyxFQUFFLENBQUM7SUFDdkIsQ0FBQztJQUVELGtCQUFFLEdBQUYsVUFBRyxZQUFZLEVBQUUsSUFBSTtRQUNqQixFQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsZUFBZSxDQUFDLFlBQVksQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUNyQyxJQUFJLEVBQUUsQ0FBQztRQUNYLENBQUM7UUFBQyxJQUFJLENBQUMsQ0FBQztZQUNKLEVBQUUsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxZQUFZLENBQUMsQ0FBQyxDQUFDLENBQUM7Z0JBQy9CLElBQUksQ0FBQyxRQUFRLENBQUMsWUFBWSxDQUFDLEdBQUcsRUFBRSxDQUFDO1lBQ3JDLENBQUM7WUFDRCxJQUFJLENBQUMsUUFBUSxDQUFDLFlBQVksQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUMzQyxDQUFDO0lBQ0wsQ0FBQztJQUVELHdCQUFRLEdBQVIsVUFBUyxZQUFZO1FBQ2pCLElBQUksQ0FBQyxlQUFlLENBQUMsWUFBWSxDQUFDLEdBQUcsSUFBSSxDQUFDO0lBQzlDLENBQUM7SUFFRCx3QkFBUSxHQUFSLFVBQVMsWUFBWTtRQUNqQixJQUFJLENBQUMsZUFBZSxDQUFDLFlBQVksQ0FBQyxHQUFHLElBQUksQ0FBQztRQUMxQyxFQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLFlBQVksQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUM5QixHQUFHLENBQUMsQ0FBZSxVQUEyQixFQUEzQixLQUFBLElBQUksQ0FBQyxRQUFRLENBQUMsWUFBWSxDQUFDLEVBQTNCLGNBQTJCLEVBQTNCLElBQTJCO2dCQUF6QyxJQUFNLElBQUksU0FBQTtnQkFDWCxJQUFJLEVBQUUsQ0FBQzthQUNWO1lBQ0QsSUFBSSxDQUFDLFFBQVEsQ0FBQyxZQUFZLENBQUMsR0FBRyxJQUFJLENBQUM7UUFDdkMsQ0FBQztJQUNMLENBQUM7SUFDTCxZQUFDO0FBQUQsQ0FBQyxBQTFDRCxJQTBDQztBQUVELGtCQUFlLElBQUksS0FBSyxFQUFFLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyJsZXQgaW5zdGFuY2UgPSBudWxsO1xuXG5jbGFzcyBFdmVudCB7XG5cbiAgICBwcml2YXRlIGRpc3BhdGNoZWREYXRhczogb2JqZWN0ID0ge307XG4gICAgcHJpdmF0ZSBmdW5jQ3Vlczogb2JqZWN0ID0ge307XG5cbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgaWYgKCFpbnN0YW5jZSkge1xuICAgICAgICAgICAgaW5zdGFuY2UgPSB0aGlzO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuaW5pdCgpO1xuICAgICAgICByZXR1cm4gaW5zdGFuY2U7XG4gICAgfVxuXG4gICAgaW5pdCgpIHtcbiAgICAgICAgdGhpcy5kaXNwYXRjaGVkRGF0YXMgPSB7fTtcbiAgICAgICAgdGhpcy5mdW5jQ3VlcyA9IHt9O1xuICAgIH1cblxuICAgIG9uKG11dGF0aW9uVHlwZSwgZnVuYykge1xuICAgICAgICBpZiAodGhpcy5kaXNwYXRjaGVkRGF0YXNbbXV0YXRpb25UeXBlXSkge1xuICAgICAgICAgICAgZnVuYygpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaWYgKCF0aGlzLmZ1bmNDdWVzW211dGF0aW9uVHlwZV0pIHtcbiAgICAgICAgICAgICAgICB0aGlzLmZ1bmNDdWVzW211dGF0aW9uVHlwZV0gPSBbXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuZnVuY0N1ZXNbbXV0YXRpb25UeXBlXS5wdXNoKGZ1bmMpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgaW5pdERhdGEobXV0YXRpb25UeXBlKXtcbiAgICAgICAgdGhpcy5kaXNwYXRjaGVkRGF0YXNbbXV0YXRpb25UeXBlXSA9IG51bGw7XG4gICAgfVxuXG4gICAgZGlzcGF0Y2gobXV0YXRpb25UeXBlKSB7XG4gICAgICAgIHRoaXMuZGlzcGF0Y2hlZERhdGFzW211dGF0aW9uVHlwZV0gPSB0cnVlO1xuICAgICAgICBpZiAodGhpcy5mdW5jQ3Vlc1ttdXRhdGlvblR5cGVdKSB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGZ1bmMgb2YgdGhpcy5mdW5jQ3Vlc1ttdXRhdGlvblR5cGVdKSB7XG4gICAgICAgICAgICAgICAgZnVuYygpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5mdW5jQ3Vlc1ttdXRhdGlvblR5cGVdID0gbnVsbDtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgbmV3IEV2ZW50KCk7XG5cbiJdfQ==